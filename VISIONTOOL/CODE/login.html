<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>로그인 - 비전툴</title>
    <script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
    <link href="style.css" rel="stylesheet" type="text/css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic:wght@400;700;800&display=swap" rel="stylesheet">
</head>
<body>
    <div id="app">
        <header id="header">
            <div id="title">
                <div id="WebName">
                    <a @click="fnMain" class="noDeco">
                        <span class="material-symbols-outlined logo-icon">construction</span>
                        <span class="nanum-gothic-regular">비전툴 </span>
                        <span class="nanum-gothic-extrabold"> VISIONTOOL</span>
                    </a>
                </div>
                <div id="title-Search"></div>
                <div id="rightBox"></div>
            </div>
            <nav id="category"></nav>
        </header>

        <main id="container" class="login-container">
            <div class="login-box">
                <div class="nanum-gothic-extrabold detailTitle">로그인</div>
                <div class="input-group">
                    <label for="userId">아이디</label>
                    <input type="text" id="userId" v-model="userId" placeholder="아이디를 입력하세요">
                </div>
                <div class="input-group">
                    <label for="userPsd">비밀번호</label>
                    <input type="password" id="userPsd" v-model="userPsd" placeholder="비밀번호를 입력하세요" @keyup.enter="fnLogin">
                </div>
                <div class="btn-group">
                    <button class="btn btn-primary" @click="fnLogin">로그인</button>
                    <button class="btn btn-secondary" @click="fnJoinPage">회원가입</button>
                </div>
            </div>
        </main>

        <footer class="footer">
            <div class="footer-content">
                <div class="footer-info">
                    <span class="material-symbols-outlined iconSmall">call</span>
                    <span>032-515-8024</span>
                </div>
                <div class="footer-info">
                    <span class="material-symbols-outlined">location_on</span>
                    <span>인천광역시 부평구 길주로 416-4 (산곡동 119-33)</span>
                </div>
                 <div class="footer-info">
                    <span>(주)비전툴</span>
                </div>
            </div>
        </footer>
    </div>
</body>
</html>

<script>
    const app = Vue.createApp({
        data() {
            return {
                userId: "",
                userPsd: ""
            };
        },
        methods: {
            // 기존 기능 유지
            fnLogin: function () {
                let self = this;
                if (!self.userId || !self.userPsd) {
                    alert("아이디와 비밀번호를 모두 입력해주세요.");
                    return;
                }
                let param = {
                    userId: self.userId,
                    userPsd: self.userPsd
                };
                $.ajax({
                    url: "http://localhost:3009/tools/login",
                    dataType: "json",
                    type: "GET",
                    data: param,
                    success: function (data) {
                        if (data.info == null) {
                            alert("아이디 또는 비밀번호가 잘못되었습니다.");
                            return;
                        }
                        location.href = `main.html?userId=${data.info.USER_ID}`;
                    },
                    error: function(xhr, status, error) {
                        console.error("Login failed:", error);
                        alert("로그인 중 오류가 발생했습니다. 잠시 후 다시 시도해주세요.");
                    }
                });
            },
            fnJoinPage() {
                location.href = "join.html";
            },
            // 헤더의 로고 클릭 시 메인으로 이동하는 기능 추가
            fnMain() {
                location.href = "main.html";
            }
        },
        mounted() {
            // 페이지 로드 시 특별히 실행할 기능이 없으므로 비워둡니다.
        }
    });

    app.mount('#app');
</script>